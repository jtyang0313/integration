<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.w3.org/1999/xhtml"
	layout:decorator="../layout/default"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
<meta charset="utf-8" />
<title>账单详情</title>
</head>

<div layout:fragment="content">
	<div class="row border-bottom">
		<nav class="navbar navbar-static-top" role="navigation"
			style="margin-bottom: 0" th:include="../layout/left :: right_head">
		</nav>
		<div class="pageheader">
			<ol class="breadcrumb">
				<li><a href="#">首页</a></li>
				<li><a href="#">对账管理</a></li>
				<li class="active">对账详情</li>
			</ol>
		</div>
	</div>
	<!-- 右下主体开始-->
	<div class="row J_mainContent" id="content-main">
		<!--主开始-->
		<div class="wrapper wrapper-content animated fadeInRight">
			<div class="ibox float-e-margins">
				<div class="ibox-content">
					<form method="post" th:action="@{/agentBill/doEdit}"
						class="form-horizontal" style="margin-top: 8px" id="postForm">
						
						<input type="hidden" name="agentId" th:value="${agentId}"/>
						<input type="hidden" name="id" th:value="${billDetail.id}"/>
						<div class="form-group">
                           <label class="col-sm-3 col-sm-3 control-label">费用项</label>
                           <div class="col-sm-6">
                               <select class="form-control" name="costCode" th:value="${billDetail.costCode}">
                               	<option th:each="c:${costList}" th:value="${c.costCode}" th:text="${c.costName}"
                               		th:selected="${billDetail.costCode}==${c.costCode}"></option>
                               </select>
                           </div>
                           </div>
                           
                           <div class="form-group">
                               <label class="col-sm-3 col-sm-3 control-label">金额</label>
                               <div class="col-sm-6">
                                   <input class="form-control" type="text" name="billFee"
                                    th:value="${#moneyUtils.changeH2Y(billDetail.billFee)}">
                               </div>
                           </div>
                           
                           <div class="form-group">
                               <label class="col-sm-3 col-sm-3 control-label">币种</label>
                               <div class="col-sm-6">
                                   <input class="form-control" type="text" name="billCurrency"
                                    th:value="${billDetail.billCurrency}">
                               </div>
                           </div>
                           
                           <div class="form-group">
                               <label class="col-sm-3 col-sm-3 control-label">箱号</label>
                               <div class="col-sm-6">
                                   <input class="form-control" type="text" name="boxCode" th:value="${billDetail.boxCode}">
                               </div>
                           </div>
                           
                           <div class="form-group">
                               <label class="col-sm-3 col-sm-3 control-label">时间</label>
                               <div class="col-sm-6">
                                   <input class="form-control" type="text" name="createTime" id="createTime"
                                    th:value="${#dates.format(billDetail.createTime, 'yyyy-MM-dd HH:mm:ss')}">
                               </div>
                           </div>
						<div class="form-group">
							<div class="col-sm-4 col-sm-offset-3 control-wrapper">
								<button class="btn btn-primary" id="formSubmit" type="button">提交</button>
								<button class="btn btn-white" type="button" th:onclick="|window.location.href='/agentBill/detail?id=${agentId}'|">返回</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<!--主结束-->
	</div>
	<!--右侧部分结束-->
	<script th:src="@{/js/plugins/validate/jquery.validate.min.js}"></script>
	<script th:src="@{/js/plugins/validate/messages_zh.min.js}"></script>
	<script th:inline="javascript">
		data_menu = "7_4";
		
		laydate.render({
            elem: '#createTime' //指定元素
            ,theme: '#40A9FF'
            ,type: 'datetime'
			,format : "yyyy-MM-dd HH:mm:ss"
        });
		//laydate({elem:"#createTime",event:"focus",format: 'YYYY-MM-DD hh:mm:ss',istime: true});
		
		//文件弹出框提交
	    $("#formSubmit").click(function(){
	    	
	    	var resultFlag = $("#postForm").valid();
			if (!resultFlag) {
				return;
			}
			
			$("#postForm").submit();
	    })
	    
	    $("#postForm").validate({
			onfocusout : function(element) {
				$(element).valid();
			},
			ignore : "ignore",
			rules : {
				costCode:{
					required:true,
				},
				billFee:{
					required:true,
				},
				billCurrency:{
					required:true,
				},
				boxCode:{
					required:true,
				},
				createTime:{
					required:true,
				}
			},
			messages : {
				costCode:{
					required:"费用项不能为空！",
				},
				billFee:{
					required:"金额不能为空！",
				},
				billCurrency:{
					required:"币种不能为空！",
				},
				boxCode:{
					required:"箱号不能为空！",
				},
				createTime:{
					required:"时间不能为空！",
				}
			},
			highlight : function(element, errorClass,validClass) {
				//打开高亮
				$(element).parent().removeClass("has-success").addClass("has-error")
			},
			unhighlight : function(element, errorClass,validClass) {
				//关闭高亮
				$(element).parent().removeClass("has-error").addClass("has-success")
			},
			errorPlacement : function(error, element) {
				error.appendTo(element.parent());
			},
			errorClass : "help-block",
			errorElement : "div"
		})
	</script>
</div>
</html>